-- Database Connection Config
-- DB_ID = root
-- DB_PW = root
-- DB_DB = NEOPLE

-- NEOPLE DB 생성
CREATE DATABASE NEOPLE;

-- NEOPLE DB 선택
USE NEOPLE;

-- TABLE 생성
CREATE TABLE TB_CHARACTER_INFO
(
	CHAR_NAME VARCHAR(20) NOT NULL,
	
	PRIMARY KEY(CHAR_NAME)
);

CREATE TABLE TB_INVENTORY_CODE
(
	INV_CODE VARCHAR(10) NOT NULL,
	INV_CODE_NAME VARCHAR(30) NOT NULL,
	
	PRIMARY KEY(INV_CODE)
);


CREATE TABLE TB_INVENTORY_INFO
(
	CHAR_NAME VARCHAR(20) NOT NULL,
	INV_CODE VARCHAR(10) NOT NULL,
	INV_MAXROW INTEGER NOT NULL,
	INV_MAXCOL INTEGER NOT NULL,
	INV_SIZE INTEGER NOT NULL,
	
	PRIMARY KEY(CHAR_NAME, INV_CODE),
	FOREIGN KEY(CHAR_NAME) REFERENCES TB_CHARACTER_INFO(CHAR_NAME),
	FOREIGN KEY(INV_CODE) REFERENCES TB_INVENTORY_CODE(INV_CODE)
);

-- 원래는 TB_ITEM으로 테이블을 분할하여  정규화를 해야 맞지만 설계 범위를 현실적으로 제한하기 위하여 생략하였습니다.
CREATE TABLE TB_INVENTORY
(
	CHAR_NAME VARCHAR(20) NOT NULL,
	INV_CODE VARCHAR(10) NOT NULL,
	ITEM_SEQ INT NOT NULL AUTO_INCREMENT,
	ITEM_NAME VARCHAR(50) NOT NULL,
	ITEM_DUPFLAG VARCHAR(1) NOT NULL,
	ITEM_MAXCNT INTEGER NOT NULL,
	ITEM_CNT INTEGER NOT NULL,
	INV_ROW INTEGER NOT NULL,
	INV_COL INTEGER NOT NULL,
	DEL_YN VARCHAR(1) NOT NULL,
	
	PRIMARY KEY(ITEM_SEQ),
	FOREIGN KEY(CHAR_NAME) REFERENCES TB_CHARACTER_INFO(CHAR_NAME),
	FOREIGN KEY(INV_CODE) REFERENCES TB_INVENTORY_CODE(INV_CODE)
);

-- TABLE별 초기 DATA 삽입
INSERT INTO TB_CHARACTER_INFO VALUES('이웃집김무녀');
INSERT INTO TB_CHARACTER_INFO VALUES('이웃집김홀리');
INSERT INTO TB_CHARACTER_INFO VALUES('이웃집김메카');
INSERT INTO TB_CHARACTER_INFO VALUES('이웃집김크리');
-- SELECT * FROM TB_CHARACTER_INFO;

INSERT INTO TB_INVENTORY_CODE VALUES('A', '인벤토리');
INSERT INTO TB_INVENTORY_CODE VALUES('B', '아바타');
INSERT INTO TB_INVENTORY_CODE VALUES('C', '크리쳐');
INSERT INTO TB_INVENTORY_CODE VALUES('D', '탈리스만');
INSERT INTO TB_INVENTORY_CODE VALUES('E', '휘장');
INSERT INTO TB_INVENTORY_CODE VALUES('A01', '장비');
INSERT INTO TB_INVENTORY_CODE VALUES('A02', '소모품');
INSERT INTO TB_INVENTORY_CODE VALUES('A03', '재료');
INSERT INTO TB_INVENTORY_CODE VALUES('A04', '전문재료');
INSERT INTO TB_INVENTORY_CODE VALUES('A05', '퀘스트');
INSERT INTO TB_INVENTORY_CODE VALUES('B01', '아바타');
INSERT INTO TB_INVENTORY_CODE VALUES('B02', '엠블렘');
INSERT INTO TB_INVENTORY_CODE VALUES('C01', '크리쳐');
INSERT INTO TB_INVENTORY_CODE VALUES('C02', '아티팩트');
INSERT INTO TB_INVENTORY_CODE VALUES('C03', '소모품');
INSERT INTO TB_INVENTORY_CODE VALUES('D01', '탈리스만');
INSERT INTO TB_INVENTORY_CODE VALUES('D02', '룬');
INSERT INTO TB_INVENTORY_CODE VALUES('E01', '휘장');
INSERT INTO TB_INVENTORY_CODE VALUES('E02', '젬');
-- SELECT * FROM tb_inventory_code;

INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김무녀', 'A', 8, 7, 8*7);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김무녀', 'B', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김무녀', 'C', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김무녀', 'D', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김무녀', 'E', 7, 10, 7*10);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김홀리', 'A', 8, 7, 8*7);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김홀리', 'B', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김홀리', 'C', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김홀리', 'D', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김홀리', 'E', 7, 10, 7*10);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김메카', 'A', 8, 7, 8*7);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김메카', 'B', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김메카', 'C', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김메카', 'D', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김메카', 'E', 7, 10, 7*10);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김크리', 'A', 8, 7, 8*7);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김크리', 'B', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김크리', 'C', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김크리', 'D', 7, 20, 7*20);
INSERT INTO TB_INVENTORY_INFO VALUES('이웃집김크리', 'E', 7, 10, 7*10);
-- SELECT * FROM tb_inventory_info;

-- CHAR_NAME / INV_CODE / ITEM_NAME / ITEM_DUPFLAG / ITEM_MAXCNT / ITEM_CNT / INV_ROW / INV_COL / DEL_YN
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '성검발드릭스', 'Y', 1, 1, 0, 0, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '성검발드릭스', 'Y', 1, 1, 1, 0, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '성검발드릭스', 'Y', 1, 1, 2, 0, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '우라늄캐넌', 'Y', 1, 1, 3, 0, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '우라늄캐넌', 'Y', 1, 1, 4, 0, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '음양사천', 'Y', 1, 1, 0, 1, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A01', NULL, '음양사천', 'Y', 1, 1, -1, -1, 'Y');

INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A02', NULL, '칸나의수제빵', 'N', 1000, 950, 5, 5, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A02', NULL, '레미의손길', 'N', 1000, 950, 6, 5, 'N');
INSERT INTO TB_INVENTORY VALUES('이웃집김무녀', 'A05', NULL, '사도정복자', 'N', 1, 1, 7, 0, 'N');
SELECT * FROM tb_inventory WHERE char_name = '이웃집김무녀';